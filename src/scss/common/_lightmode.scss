:root[data-mode=light] {
  --lightness-offset: 0; // Negate theme mod
  --saturation-offset: 0; // Negate theme mod

  // === SCHEME ================================================================
  --primary-400: hsl(217deg 90% 61%);
  --primary-500: hsl(217deg 91% 60%);
  --primary-600: hsl(226deg 71% 40%);

  // === BACKGROUNDS ===========================================================
  --bg-200-free: #{hsl_code_free(220, 13, 91)};
  --bg-1000-free: #{hsl_code_free(221, 39, 11)};

  --bg-10: #{hsl_code(210, 20, 99)};
  --bg-50: #{hsl_code(210, 20, 98)};
  --bg-100: #{hsl_code(220, 14, 96)};
  --bg-200: hsl(var(--bg-200-free));
  --bg-300: #{hsl_code(216, 12, 84)};
  --bg-400: #{hsl_code(218, 11, 65)};
  --bg-500: #{hsl_code(220, 9, 46)};
  --bg-600: #{hsl_code(215, 14, 34)};
  --bg-700: #{hsl_code(217, 19, 27)};
  --bg-800: #{hsl_code(215, 28, 17)};
  --bg-900: #{hsl_code(221, 39, 11)};
  --bg-1000: hsl(var(--bg-1000-free));

  // === FOREGROUNDS ===========================================================
  &,
  .chapter-formatting {
    // Needs to be repeated to force recalculation in chapters
    --fg-100: #{hsl_font_code(221, 54, 1)};
    --fg-200: #{hsl_font_code(221, 49, 3)};
    --fg-300: #{hsl_font_code(221, 44, 7)};
    --fg-400: #{hsl_font_code(221, 39, 11)}; // 900
    --fg-500: #{hsl_font_code(215, 28, 17)}; // 800
    --fg-600: #{hsl_font_code(217, 19, 27)}; // 700
    --fg-700: #{hsl_font_code(215, 14, 34)}; // 600
    --fg-800: #{hsl_font_code(220, 9, 46)}; // 500
    --fg-900: #{hsl_font_code(218, 11, 65)}; // 400
    --fg-1000: #{hsl_font_code(210, 20, 96)};
    --fg-tinted: #{hsl_font_code(216, 24, 22)}; // 750
  }

  // === LAYOUT ================================================================
  --layout-background-texture-main: none;
  --layout-link: inherit;
  --layout-link-hover: var(--fg-200);
  --layout-collection-text: var(--fg-1000);
  --layout-color-lineart: var(--bg-600);
  --layout-color-separator: rgb(0 0 0 / 8%);

  // === MINIMAL ===============================================================
  --minimal-main-box-shadow: 0 0 1px rgb(0 0 0 / 40%);
  --minimal-container-box-shadow: 0 0 1px rgb(0 0 0 / 40%);

  // === UNSORTED ==============================================================
  --theme-color-base: 220 13 91;
  --secant: var(--bg-300);
  --disabled-pattern: hsl(var(--bg-1000-free) / 3%) repeating-linear-gradient(-45deg, hsl(var(--bg-1000-free) / 5%), hsl(var(--bg-1000-free) / 5%) 2px, transparent 2px, transparent 5px);
  --disabled-embed-background: var(--disabled-pattern);
  --progress-bar-background: var(--bg-900);
  --progress-bar-color: var(--bg-200);
  --checkmark-not-checked: var(--bg-300);
  --media-button-color: var(--fg-600);
  --media-button-color-hover: var(--fg-600);
  --spoiler-background: var(--fg-500);
  --spoiler-text-visible: var(--fg-1000);
  --ins-background: #7ec945;
  --ins-color: inherit;
  --del-background: #e96c63;
  --del-color: inherit;
  --vote-default: var(--bg-500);
  --vote-down: #dc2626;
  --vote-up: #16a34a;
  --skeleton-shape-color: var(--fg-900);
  --skeleton-cutout-color: var(--e-1);
  --code-background: var(--bg-200);
  --code-background-inline: rgb(0 0 0 / 7%);
  --code-color: var(--fg-700);
  --warning: #eb5247;
  --warning-caption: white;
  --success: #16a34a;
  --success-caption: white;
  --invert-filter: invert(1);
  --red: #dc2626;
  --litrpg-bg: var(--bg-10);
  --litrpg-fg: var(--fg-500);
  --litrpg-ins: #16c79a;
  --litrpg-del: #be123c;

  // === ELEVATIONS ============================================================
  --e-body: var(--bg-300);
  --e-fullscreen: var(--e-1);
  --e-0: var(--bg-100);
  --e-1: var(--bg-50);
  --e-2: var(--bg-10);
  --e-overlay: var(--bg-1000);

  // === NAVIGATION ============================================================
  --navigation-background-sticky: var(--e-2);
  --navigation-text: var(--fg-200);
  --navigation-text-hover: var(--fg-200);
  --navigation-actions-text: var(--fg-600);
  --navigation-actions-text-hover: var(--fg-400);
  --navigation-text-shadow: none;
  --navigation-drop-shadow: drop-shadow(0 2px 1px rgba(0, 0, 0, 17%));
  --navigation-item-active-background: var(--bg-200);
  --navigation-item-active-submenu-background: var(--bg-200);
  --navigation-item-active-submenu-secant: var(--bg-100);
  --navigation-subitem-active-background: var(--bg-300);
  --navigation-submenu-box-shadow: 0 4px 3px -2px rgb(0 0 0 / 30%);
  --navigation-new-follow-background: var(--primary-500);
  --navigation-new-follow-color: white;

  // === TABS ===================================================================
  --tab-background-active: var(--bg-600);
  --tab-background-inactive: var(--bg-200);
  --tab-background-hover: var(--bg-300);
  --tab-text-shadow-active: none;
  --tab-text-shadow-inactive: none;
  --tab-text-active: var(--fg-1000);
  --tab-text-hover: var(--fg-300);
  --tab-text-inactive: var(--fg-800);

  // === MODALS ================================================================
  --modal-background: var(--bg-50);

  // === SHADOWS ===============================================================
  --embed-box-shadow: 0 0 3px rgb(0 0 0 / 30%);

  // === MOBILE MENU ===========================================================
  --mobile-menu-text-shadow: none;
  --mobile-menu-bookmark-text-shadow: none;
  --mobile-menu-bookmark-progress-background: hsl(var(--bg-1000-free) / 10%);
  --mobile-menu-current-chapter-text: var(--primary-500);

  // === CONTENT ===============================================================
  --blockquote-background: hsl(var(--bg-1000-free) / 5%);
  --text-shadow: none;

  // === TABLES ================================================================
  --table-border-color: var(--fg-900);
  --table-stripe-background: hsl(var(--bg-1000-free) / 5%);

  // === FONT SETTINGS =========================================================
  --font-smoothing-webkit: subpixel-antialiased;
  --font-smoothing-moz: auto;
  --font-weight-normal: 400;
  --font-weight-semi-strong: 600;
  --font-weight-strong: 600;
  --font-weight-medium: 500;
  --font-weight-heading: 700;
  --font-weight-badge: 500;
  --font-weight-post-meta: 400;
  --font-weight-ribbon: 700;
  --font-weight-navigation: 400;
  --font-line-height-base: 1.7;
  --font-letter-spacing-base: 0em; // Unit is required!

  // === COLORS - HEADING LINKS ================================================
  --heading-link: var(--fg-400);
  --heading-link-hover: var(--fg-600);

  // === COLORS - INLINE LINKS =================================================
  --inline-link: var(--primary-500);
  --inline-link-hover: var(--primary-400);
  --inline-link-visited: var(--primary-600);

  // === COLORS - STORY LINKS ==================================================
  --story-link: var(--fg-400);
  --story-link-hover: var(--fg-600);

  // === COLORS - CARDS ========================================================
  --card-label-type-text: var(--fg-1000);
  --card-label-type-background: var(--bg-800);

  // === COLORS - BOOKMARKS ====================================================
  --bookmark-color-alpha: var(--bg-400);
  --bookmark-color-beta: #f59e0b;
  --bookmark-color-gamma: #77BFA3;
  --bookmark-color-delta: #dd5960;
  --bookmark-line: var(--primary-500);
  --bookmark-button-text-active-alpha: var(--fg-1000);
  --bookmark-button-text-active-beta: var(--fg-300);
  --bookmark-button-text-active-gamma: var(--fg-300);
  --bookmark-button-text-active-delta: var(--fg-300);
  --bookmark-progress-opacity: .25;
  --bookmark-progress-mobile-opacity: 1;

  // === BUTTONS - PRIMARY =====================================================
  --button-primary-text: var(--fg-1000);
  --button-primary-text-hover: var(--fg-1000);
  --button-primary-text-disabled: var(--fg-1000);
  --button-primary-background: var(--bg-500);
  --button-primary-background-hover: var(--bg-700);
  --button-primary-background-disabled: var(--bg-400);
  --button-box-shadow: none;

  // === BUTTONS - SECONDARY ===================================================
  --button-secondary-text: var(--fg-700);
  --button-secondary-text-hover: var(--fg-200);
  --button-secondary-text-active: var(--fg-1000);
  --button-secondary-text-disabled: var(--fg-600);
  --button-secondary-background: transparent;
  --button-secondary-background-hover: var(--bg-200);
  --button-secondary-background-active: var(--bg-600);
  --button-secondary-background-disabled: var(--disabled-pattern);
  --button-secondary-border: 1px solid var(--bg-300);
  --button-secondary-border-active: 1px solid var(--bg-600);
  --button-secondary-border-disabled: 1px solid var(--bg-300);

  // === BUTTONS - QUICK =======================================================
  --button-quick-background: var(--bg-100);
  --button-quick-background-hover: var(--bg-500);
  --button-quick-text: var(--fg-700);
  --button-quick-text-hover: var(--fg-1000);
  --button-quick-border: none;
  --button-quick-border-hover: none;

  // === BUTTONS - FILE BLOCK ==================================================
  --button-file-block-text: var(--fg-1000);
  --button-file-block-text-hover: var(--fg-1000);
  --button-file-block-background: var(--bg-500);
  --button-file-block-background-hover: var(--bg-700);

  // === BUTTONS - OTHER =======================================================
  --button-selection-background: var(--primary-500);
  --button-selection-text-color: var(--fg-1000);

  // === INPUTS - GENERAL ======================================================
  --input-shadow: inset 0 0 1px rgb(0 0 0 / 5%);
  --input-placeholder: var(--bg-400);
  --input-fill: var(--bg-500);
  --input-node-background: var(--bg-400);
  --input-node-text: var(--fg-1000);

  // === INPUTS - RANGE ========================================================
  --input-range-thumb: var(--bg-500);
  --input-range-thumb-hover: var(--bg-700);

  // === INPUTS - TEXT =========================================================
  --input-border-color: transparent;
  --input-border-color-hover: transparent;
  --input-border-color-focus: transparent;
  --input-border-color-active: transparent;
  --input-border-color-disabled: transparent;
  --input-background: hsl(var(--bg-1000-free) / 7%);
  --input-background-disabled: hsl(var(--bg-1000-free) / 3%) repeating-linear-gradient(-45deg, var(--input-background), var(--input-background) 2px, transparent 2px, transparent 5px);

  // === POPUP MENU ============================================================
  --popup-menu-background: var(--bg-800);
  --popup-menu-background-hover: var(--bg-600);
  --popup-menu-text: var(--fg-1000);
  --popup-menu-text-hover: var(--fg-1000);

  // === PAGINATION ============================================================
  --pagination-background: var(--bg-200);
  --pagination-background-hover: var(--bg-300);
  --pagination-text: var(--fg-400);
  --pagination-text-hover: var(--fg-300);
  --pagination-current-text: var(--fg-1000);
  --pagination-current-background: var(--bg-600);

  // === INFO BOXES (FIX TO COUNTER DARKEN) ====================================
  --infobox-background: hsl(var(--bg-1000-free) / 5%);
  --infobox-text: var(--fg-600);
  --infobox-background-free: var(--bg-1000-free);
  --infobox-gradient: linear-gradient(-90deg, hsl(var(--infobox-background-free) / 3%) 0%, hsl(var(--infobox-background-free) / 3%) 55%, transparent 90%);

  // === TOOLTIPS/NOTIFICATIONS ================================================
  --tooltip-background: var(--bg-800);
  --tooltip-text: var(--fg-1000);

  // === COMMENTS ==============================================================
  --comment-background: hsl(var(--bg-1000-free) / 5%);
  --comment-background-private: hsl(var(--bg-1000-free) / 3%) repeating-linear-gradient(-45deg, var(--comment-background), var(--comment-background) 2px, transparent 2px, transparent 5px);
  --comment-background-deleted: hsl(var(--bg-1000-free) / 3%) repeating-linear-gradient(-45deg, var(--comment-background), var(--comment-background) 2px, transparent 2px, transparent 5px);
  --comment-background-offensive: hsl(var(--bg-1000-free) / 3%) repeating-linear-gradient(45deg, var(--comment-background), var(--comment-background) 2px, transparent 2px, transparent 5px);
  --comment-background-sticky: hsl(var(--bg-1000-free) / 7%);
  --comment-border-sticky: 1px dashed rgb(0 0 0 / 30%);

  // === SYSTEM ================================================================
  --text-selection-background: var(--bg-600);
  --text-selection-color: var(--fg-1000);
  --placeholder-background: var(--e-body);

  // === SCROLL BARS ===========================================================
  --scrollbar-background: hsl(var(--bg-1000-free) / 20%);
  --scrollbar-thumb: var(--bg-500);
  --scrollbar-box-shadow: inset 0 0 6px rgb(0 0 0 / 10%);

  // === BADGES ================================================================
  --badge-generic-text: var(--fg-1000);
  --badge-generic-background: var(--bg-400);
  --badge-supporter-text: var(--fg-1000);
  --badge-supporter-background: #ed5e76;
  --badge-moderator-text: var(--fg-1000);
  --badge-moderator-background: #5369ac;
  --badge-admin-text: var(--fg-1000);
  --badge-admin-background: var(--bg-700);
  --badge-author-text: var(--fg-1000);
  --badge-author-background: var(--bg-700);
  --badge-override-text: var(--fg-1000);
  --badge-override-background: var(--bg-400);

  .consent-banner {
    --consent-banner-text: var(--fg-1000);
    --consent-banner-background: var(--e-overlay);
    --button-primary-text: var(--fg-500);
    --button-primary-text-hover: var(--fg-200);
    --button-primary-background: var(--fg-1000);
    --button-primary-background-hover: var(--fg-1000);

    a {
      color: var(--primary-400) !important;
    }
  }

  .micro-menu {
    --micro-menu-background: var(--e-overlay);
    --micro-menu-text: var(--fg-1000);
    --micro-menu-text-hover: var(--fg-1000);
    --micro-menu-box-shadow: 0 0 5px 2px rgb(0 0 0 / 18%);
  }

  .selected-paragraph {
    --paragraph-selection-background: rgb(0 0 0 / 10%);
    --paragraph-tools-filter: drop-shadow(0 -3px 6px rgb(0 0 0 / 5%));
  }

  .tts-interface {
    --tts-background: var(--e-overlay);
    --tts-button-active-background: var(--primary-400);
    --tts-button-active-text: var(--fg-1000);
    --fg-600: var(--fg-1000);
    --input-background: var(--bg-100);
  }

  .current-reading {
    --tts-current-reading-background: hsl(var(--bg-1000-free) / 5%);
  }

  .toggle {
    --toggle-text: var(--button-primary-background);
    --toggle-text-hover: var(--button-primary-background-hover);
    --toggle-text-checked: var(--fg-1000);
    --toggle-text-checked-hover: var(--fg-1000);
    --toggle-background: transparent;
    --toggle-background-checked: var(--button-primary-background);
    --toggle-background-hover: var(--button-primary-background-hover);
    --toggle-border: var(--button-primary-background);
    --toggle-border-checked: var(--button-primary-background);
    --toggle-border-hover: var(--button-primary-background-hover);
  }

  .suggestion-tools {
    --button-suggestion-text: var(--fg-1000);
    --button-suggestion-text-hover: var(--fg-1000);
    --button-suggestion-background: var(--bg-700);
    --button-suggestion-background-hover: var(--bg-800);
  }

  .tag-pill {
    --tag-text: var(--fg-600);
    --tag-text-hover: var(--fg-1000);
    --tag-background: var(--bg-300);
    --tag-background-hover: var(--bg-700);
    --tag-secondary-text: var(--fg-900);
    --tag-secondary-text-hover: var(--fg-1000);
    --tag-secondary-background: transparent;
    --tag-secondary-background-hover: var(--bg-700);
    --tag-secondary-border: 1px solid var(--bg-300);
    --tag-secondary-border-hover: 1px solid transparent;
    --tag-warning-text-hover: var(--fg-1000);
    --tag-warning-background: rgb(246 96 85 / 5%);
    --tag-warning-background-hover: var(--warning);
  }

  .ribbon {
    --ribbon-background: var(--e-2);
    --ribbon-text: var(--fg-500);
    --ribbon-background-read: var(--e-2);
    --ribbon-text-read: var(--fg-500);
    --ribbon-box-shadow: 0 0 2px rgb(0 0 0 / 30%);
  }

  .header__title {
    --site-title-heading-color: var(--fg-1000);
    --site-title-tagline-color: var(--fg-1000);
  }

  .iframe-consent {
    --font-bold: 600;
  }

  .wp-block-embed {
    &:after {
      opacity: .1;
    }
  }

  .story {
    &__list {
      &-item {
        &._collapse {
          &::before,
          &::after {
            background: var(--fg-900);
          }
        }
      }
    }
  }
}

:root[data-mode=light].minimal {
  .header__title {
    --site-title-heading-color: var(--fg-200);
    --site-title-tagline-color: var(--fg-500);
    --site-title-text-shadow: none;
  }
}
